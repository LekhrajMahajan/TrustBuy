import{c as k,v as y,u as f,b as u,r as j,j as e,S as N,L as l,t as o,d as w}from"./index-4p90xbUw.js";import{g as v}from"./helpers-DaoO1KdG.js";import{M as S}from"./minus-D1whemL5.js";import{A as P}from"./arrow-right-BwMUzFUK.js";import{M as C}from"./map-pin-Bm5GkqQX.js";const L=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],M=k("plus",L),B=()=>{const{cartItems:r,removeFromCart:x,updateQty:c,itemsPrice:m,taxPrice:h,shippingPrice:i,totalPrice:p}=y(),{user:b}=f(),a=u(),[d,n]=j.useState(!1),g=async()=>{if(!b){o.error("Please login to proceed."),a("/login");return}n(!0);try{const t=await w.getProfile(),s=[];if(t.address?.trim()||s.push("Address"),t.city?.trim()||s.push("City"),t.pincode?.trim()||s.push("Pincode"),s.length>0){o.error("Please complete your profile before checkout.",{description:`Missing: ${s.join(", ")}. Go to Profile → Edit to add these.`,duration:5e3,action:{label:"Go to Profile",onClick:()=>a("/profile")}});return}a("/payment")}catch{a("/payment")}finally{n(!1)}};return r.length===0?e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 flex flex-col items-center justify-center",children:e.jsxs("div",{className:"text-center max-w-md px-6",children:[e.jsx(N,{className:"w-12 h-12 text-gray-300 mx-auto mb-6"}),e.jsx("h2",{className:"text-2xl font-bold uppercase tracking-tight text-black dark:text-white mb-2",children:"Your Bag is Empty"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mb-8 text-sm",children:"Looks like you haven't made your choice yet."}),e.jsx(l,{to:"/shop",className:"inline-block px-8 py-3 bg-black dark:bg-black border border-transparent dark:border-white text-white dark:text-white text-xs font-bold uppercase tracking-widest hover:bg-gray-800 transition-all",children:"Start Shopping"})]})}):e.jsx("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("h1",{className:"text-3xl sm:text-4xl font-extrabold uppercase tracking-tighter mb-8 sm:mb-12",children:["Shopping Bag ",e.jsxs("span",{className:"text-base sm:text-lg text-gray-400 font-medium ml-2",children:["(",r.length,")"]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12",children:[e.jsxs("div",{className:"lg:col-span-2",children:[e.jsx("div",{className:"space-y-8",children:r.map(t=>e.jsxs("div",{className:"flex gap-4 sm:gap-6 py-6 border-b border-gray-100 dark:border-gray-800 last:border-0",children:[e.jsx("div",{className:"w-24 sm:w-32 h-32 sm:h-40 bg-gray-50 dark:bg-gray-800 flex-shrink-0 overflow-hidden relative",children:e.jsx("img",{src:v(t.image),alt:t.name,className:"w-full h-full object-cover mix-blend-multiply dark:mix-blend-normal hover:scale-105 transition-transform duration-500"})}),e.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:justify-between sm:items-start gap-1 sm:gap-0",children:[e.jsx("h3",{className:"text-base sm:text-lg font-bold text-black dark:text-white uppercase tracking-wide leading-tight sm:pr-4",children:t.name}),e.jsxs("p",{className:"text-base sm:text-lg font-bold text-black dark:text-white",children:["₹",t.currentPrice.toLocaleString("en-IN")]})]}),e.jsx("p",{className:"text-[10px] sm:text-xs text-gray-500 dark:text-gray-400 uppercase tracking-wider mt-1",children:t.category})]}),e.jsxs("div",{className:"flex justify-between items-center sm:items-end mt-4 sm:mt-0",children:[e.jsxs("div",{className:"flex items-center gap-2 sm:gap-4 border border-gray-200 dark:border-gray-700 px-2 sm:px-3 py-1 rounded-sm",children:[e.jsx("button",{onClick:()=>c(t._id,t.qty-1),disabled:t.qty<=1,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white disabled:opacity-30",children:e.jsx(S,{className:"w-3 h-3"})}),e.jsx("span",{className:"text-sm font-bold w-4 text-center",children:t.qty}),e.jsx("button",{onClick:()=>c(t._id,t.qty+1),disabled:t.qty>=t.stock,className:"text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white disabled:opacity-30",children:e.jsx(M,{className:"w-3 h-3"})})]}),e.jsx("button",{onClick:()=>x(t._id),className:"text-[10px] sm:text-xs font-bold text-red-500 hover:text-red-700 uppercase tracking-wider border-b border-transparent hover:border-red-700 transition-all",children:"Remove"})]})]})]},t._id))}),e.jsx("div",{className:"mt-8",children:e.jsxs(l,{to:"/shop",className:"text-xs font-bold uppercase tracking-widest text-gray-500 dark:text-gray-400 hover:text-black dark:hover:text-white transition-colors flex items-center gap-2",children:[e.jsx(P,{className:"w-4 h-4 rotate-180"})," Continue Shopping"]})})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"bg-gray-50 dark:bg-gray-950 p-8 sticky top-24",children:[e.jsx("h2",{className:"text-lg font-bold uppercase tracking-widest mb-6 border-b border-gray-200 dark:border-gray-700 pb-4",children:"Order Summary"}),e.jsxs("div",{className:"space-y-4 text-sm text-gray-600 dark:text-gray-400 mb-6",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Subtotal"}),e.jsxs("span",{className:"font-medium text-black dark:text-white",children:["₹",m.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Shipping"}),e.jsx("span",{className:i===0?"text-black dark:text-white font-medium":"",children:i===0?"Free":`₹${i}`})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Tax (Estimated)"}),e.jsxs("span",{children:["₹",h.toLocaleString("en-IN")]})]})]}),e.jsxs("div",{className:"flex justify-between items-center py-4 border-t border-gray-200 dark:border-gray-700 mb-6",children:[e.jsx("span",{className:"text-base font-bold text-black dark:text-white uppercase",children:"Total"}),e.jsxs("span",{className:"text-xl font-bold text-black dark:text-white",children:["₹",p.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-start gap-2 bg-amber-50 dark:bg-amber-950 border border-amber-200 dark:border-amber-800 rounded px-3 py-2 mb-4 text-xs text-amber-800 dark:text-amber-400",children:[e.jsx(C,{className:"w-3.5 h-3.5 flex-shrink-0 mt-0.5"}),e.jsxs("span",{children:["Delivery address is required. Make sure your ",e.jsx(l,{to:"/profile",className:"underline font-bold",children:"profile"})," has address, city & pincode."]})]}),e.jsx("button",{onClick:g,disabled:d,className:"w-full py-4 bg-black dark:bg-yellow border border-transparent dark:border-white text-white dark:text-white text-xs font-bold uppercase tracking-widest hover:bg-[#fdc600] hover:text-black dark:hover:text-black transition-all shadow-xl disabled:opacity-70",children:d?"Verifying...":"Checkout"}),e.jsx("p",{className:"text-[10px] text-gray-400 text-center mt-4 uppercase tracking-wide",children:"Secure Checkout by Stripe"})]})})]})]})})};export{B as default};
