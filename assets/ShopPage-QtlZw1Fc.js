import{c as F,r as o,i as z,j as e,n as D,X as H,p as O}from"./index-CYqko9S1.js";import{P as _}from"./ProductCard-aNxSDqI3.js";import"./helpers-CgQ46Het.js";import"./zap-BXRdQHeU.js";import"./star-847YWAQg.js";const I=[["path",{d:"M10 5H3",key:"1qgfaw"}],["path",{d:"M12 19H3",key:"yhmn1j"}],["path",{d:"M14 3v4",key:"1sua03"}],["path",{d:"M16 17v4",key:"1q0r14"}],["path",{d:"M21 12h-9",key:"1o4lsq"}],["path",{d:"M21 19h-5",key:"1rlt1p"}],["path",{d:"M21 5h-7",key:"1oszz2"}],["path",{d:"M8 10v4",key:"tgpxqk"}],["path",{d:"M8 12H3",key:"a7s4jb"}]],q=F("sliders-horizontal",I),X=({initialCategory:P,initialSort:S})=>{const[b,L]=o.useState([]),[d,m]=o.useState([]),[E,M]=o.useState(!0),[R,h]=o.useState(!1),[k,j]=o.useState(!1),[u]=z(),g=u.get("search")||"",n=P||u.get("category")||"all",f=S||u.get("sort")||"trending",[v,y]=o.useState(f),[c,x]=o.useState({priceRange:[0,1e5],trustScore:"all",rating:0,availability:"all",category:n}),w=8,[p,N]=o.useState(1);o.useEffect(()=>{N(1)},[d]),o.useEffect(()=>{const r=()=>{window.innerHeight+document.documentElement.scrollTop+100>=document.documentElement.offsetHeight&&d.length>p*w&&N(s=>s+1)};return window.addEventListener("scroll",r),()=>window.removeEventListener("scroll",r)},[p,d]);const A=["all","Fashion",...new Set(b.map(r=>r.category))];o.useEffect(()=>{(async()=>{try{const s=await O.getAllProducts();L(s);let l=s;if(g){const t=g.toLowerCase();l=l.filter(i=>i.name.toLowerCase().includes(t)||i.category.toLowerCase().includes(t))}n&&n!=="all"&&(n.toLowerCase()==="fashion"?l=l.filter(t=>["jackets","denim","women's wear","shoes","bags"].includes(t.category.toLowerCase())):l=l.filter(t=>t.category.toLowerCase()===n.toLowerCase()),x(t=>({...t,category:n})));const a=f;y(a),a==="price-low-high"?l.sort((t,i)=>(t.currentPrice||0)-(i.currentPrice||0)):a==="price-high-low"?l.sort((t,i)=>(t.currentPrice||0)-(i.currentPrice||0)):a==="newest"?l.sort((t,i)=>new Date(i.createdAt)-new Date(t.createdAt)):l.sort((t,i)=>(i.sales||0)-(t.sales||0)),m(l)}catch(s){console.error(s)}finally{M(!1)}})()},[g,n,f]);const C=(r=v)=>{let s=[...b];c.category!=="all"&&(c.category.toLowerCase()==="fashion"?s=s.filter(a=>["jackets","denim","women's wear","shoes","bags"].includes(a.category.toLowerCase())):s=s.filter(a=>a.category.toLowerCase()===c.category.toLowerCase())),s=s.filter(a=>(a.currentPrice||a.basePrice)>=c.priceRange[0]&&(a.currentPrice||a.basePrice)<=c.priceRange[1]);const l=r;l==="price-low-high"?s.sort((a,t)=>(a.currentPrice||0)-(t.currentPrice||0)):l==="price-high-low"?s.sort((a,t)=>(t.currentPrice||0)-(a.currentPrice||0)):l==="newest"?s.sort((a,t)=>new Date(t.createdAt)-new Date(a.createdAt)):s.sort((a,t)=>(t.sales||0)-(a.sales||0)),m(s),h(!1)};return e.jsxs("div",{className:"min-h-screen bg-white dark:bg-gray-900 pt-24 pb-12 relative",children:[e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-end justify-between mb-12 gap-6 pb-6 border-b border-black dark:border-white",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-5xl font-extrabold uppercase tracking-tighter text-black dark:text-white",children:n!=="all"?n:"Collection"}),e.jsx("p",{className:"text-gray-500 dark:text-gray-400 mt-2 text-sm font-medium",children:g?`Results for "${g}"`:`Showing ${d.length} curated items.`})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{className:"relative z-20",children:[e.jsxs("button",{onClick:()=>j(!k),className:"flex items-center gap-1 text-sm font-bold uppercase tracking-widest hover:text-[#fdc600] transition-colors",children:["Sort: ",e.jsx("span",{className:"border-b border-black dark:border-white pb-0.5",children:v.replace(/-/g," ")})," ",e.jsx(D,{className:"w-3 h-3"})]}),k&&e.jsx("div",{className:"absolute left-0 md:left-auto md:right-0 mt-4 w-48 bg-white dark:bg-gray-900 border border-gray-100 dark:border-gray-800 shadow-xl py-2 z-50 animate-in fade-in zoom-in-95",children:["trending","price-low-high","price-high-low","newest"].map(r=>e.jsx("button",{onClick:()=>{y(r),C(r),j(!1)},className:"block w-full text-left px-4 py-2 text-xs font-bold uppercase tracking-widest hover:bg-gray-50 dark:bg-gray-950",children:r.replace(/-/g," ")},r))})]}),e.jsxs("button",{onClick:()=>h(!0),className:"flex items-center gap-2 px-4 py-2 bg-black dark:bg-gray-800 text-white dark:text-white text-xs font-bold uppercase tracking-widest hover:bg-gray-800 transition-all",children:[e.jsx(q,{className:"w-3 h-3"})," Filter"]})]})]}),E?e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-12",children:[...Array(8)].map((r,s)=>e.jsx("div",{className:"aspect-[3/4] bg-gray-200 dark:bg-gray-800 animate-pulse rounded-sm flex items-center justify-center",children:e.jsx("div",{className:"w-6 h-6 border-2 border-black dark:border-white border-t-transparent rounded-full animate-spin"})},s))}):d.length===0?e.jsxs("div",{className:"text-center py-32 bg-gray-50 dark:bg-gray-950",children:[e.jsx("h3",{className:"text-2xl font-bold uppercase text-gray-400",children:"No Matches Found"}),e.jsx("button",{onClick:()=>{x({priceRange:[0,1e5],trustScore:"all",rating:0,availability:"all",category:"all"}),y("trending"),m(b)},className:"mt-4 text-sm font-bold border-b border-black dark:border-white pb-1 hover:text-[#fdc600] hover:border-[#fdc600]",children:"Reset Catalog"})]}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-x-6 gap-y-12",children:d.slice(0,p*w).map(r=>e.jsx(_,{product:r},r._id))}),d.length>p*w&&e.jsx("div",{className:"py-12 flex justify-center text-xs font-bold uppercase tracking-widest text-gray-400 animate-pulse",children:"Loading More..."})]})]}),e.jsxs("div",{className:`fixed inset-0 z-50 transform transition-transform duration-500 ease-custom-ease ${R?"translate-x-0":"translate-x-full"}`,children:[e.jsx("div",{className:"absolute inset-0 bg-black dark:bg-gray-800/20 backdrop-blur-sm",onClick:()=>h(!1)}),e.jsxs("div",{className:"absolute right-0 top-0 h-full w-full max-w-sm bg-white dark:bg-gray-900 shadow-2xl flex flex-col",children:[e.jsxs("div",{className:"px-8 py-6 border-b border-gray-100 dark:border-gray-800 flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-bold uppercase tracking-tight",children:"Refine"}),e.jsx("button",{onClick:()=>h(!1),children:e.jsx(H,{className:"w-6 h-6 hover:rotate-90 transition-transform"})})]}),e.jsxs("div",{className:"p-8 space-y-10 flex-1 overflow-y-auto",children:[e.jsxs("section",{children:[e.jsxs("div",{className:"flex justify-between mb-4",children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest",children:"Price Limit"}),e.jsxs("span",{className:"text-xs font-mono",children:["â‚¹",c.priceRange[1].toLocaleString()]})]}),e.jsx("input",{type:"range",min:0,max:2e5,step:1e3,value:c.priceRange[1],onChange:r=>x({...c,priceRange:[0,parseInt(r.target.value)]}),className:"w-full h-1 bg-gray-200 dark:bg-gray-700 rounded-lg appearance-none cursor-pointer accent-black"})]}),e.jsxs("section",{children:[e.jsx("h3",{className:"text-xs font-bold uppercase tracking-widest mb-4",children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:A.map(r=>e.jsx("button",{onClick:()=>x({...c,category:r}),className:`px-4 py-2 border text-xs font-bold uppercase tracking-widest transition-all ${c.category?.toLowerCase()===r?.toLowerCase()?"bg-black dark:bg-gray-800 text-white dark:text-white border-black dark:border-white":"bg-transparent text-gray-500 dark:text-gray-400 border-gray-200 dark:border-gray-700 hover:border-black dark:border-white"}`,children:r},r))})]})]}),e.jsx("div",{className:"p-8 border-t border-gray-100 dark:border-gray-800 bg-gray-50 dark:bg-gray-950",children:e.jsx("button",{onClick:C,className:"w-full py-4 bg-black dark:bg-gray-800 text-white dark:text-white text-xs font-bold uppercase tracking-widest hover:bg-[#fdc600] hover:text-black dark:hover:text-black transition-all",children:"Apply Filters"})})]})]})]})};export{X as default};
