import{w as A,r as a,a as D,s as E,u as B,j as e,n as I,U as T,L as W,p as y,t as r}from"./index-BaDRjfji.js";import{L as w}from"./loader-circle-ItpIGFjr.js";import{S as k}from"./star-CaSlIxMv.js";import{T as _}from"./truck-CXJqim4v.js";import{S as q}from"./shield-check-fsq-baGn.js";import{S as G}from"./shopping-cart-B11UrQTm.js";import{Z as M}from"./zap-BImtoEMv.js";const z=()=>{const{id:i}=A(),[s,S]=a.useState(null),[C,P]=a.useState(!0),n=D(),[d,m]=a.useState(5),[x,h]=a.useState(""),[o,u]=a.useState(!1),{addToCart:p}=E(),{user:g}=B(),b=async()=>{try{const t=await y.getProductById(i);S(t)}catch(t){console.error("Error fetching product",t)}finally{P(!1)}};a.useEffect(()=>{b()},[i]);const R=async t=>{t.preventDefault(),u(!0);try{await y.createReview(i,{rating:d,comment:x}),r.success("Review Submitted Successfully!"),h(""),m(5),b()}catch(l){r.error(l.response?.data?.message||"Error submitting review")}finally{u(!1)}},L=()=>{p(s),r(`${s.name} added to cart!`,{description:"Item has been successfully added.",action:{label:"View Cart",onClick:()=>n("/cart")}})},$=()=>{if(!g){r.error("Login Required",{description:"You must be logged in to buy items.",action:{label:"Login Now",onClick:()=>n("/login")}});return}p(s),n("/payment")},c="bg-white dark:bg-gray-900 rounded-xl border border-slate-200 shadow-sm overflow-hidden",f="text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 text-slate-900 mb-2 block",j="flex h-10 w-full rounded-md border border-slate-200 bg-white dark:bg-gray-900 px-3 py-2 text-sm ring-offset-white placeholder:text-slate-500 focus:outline-none focus:ring-2 focus:ring-slate-950 focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 transition-all",v="inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-white transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-slate-950 focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 bg-slate-900 text-slate-50 hover:bg-slate-900/90 h-10 px-4 py-2 w-full";return C?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsx(w,{className:"w-8 h-8 animate-spin text-slate-900"})}):s?e.jsx("div",{className:"min-h-screen bg-gray-50 dark:bg-gray-950 pt-24 pb-12",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[e.jsxs("div",{className:`grid grid-cols-1 md:grid-cols-2 gap-8 ${c} p-8 mb-12`,children:[e.jsx("div",{className:"flex justify-center items-center bg-gray-50 dark:bg-gray-950 rounded-lg p-6 h-[300px] md:h-[400px] border border-slate-100",children:e.jsx("img",{src:s.image||"https://via.placeholder.com/500",alt:s.name,className:"max-h-full max-w-full object-contain hover:scale-105 transition-transform duration-300 drop-shadow-sm"})}),e.jsxs("div",{className:"flex flex-col justify-between",children:[e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-extrabold text-slate-900 tracking-tight",children:s.name}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((t,l)=>e.jsx(k,{className:`w-5 h-5 ${l<Math.round(s.rating)?"fill-current":"text-gray-300"}`},l))}),e.jsxs("span",{className:"text-slate-500 text-sm font-medium",children:["(",s.numReviews," reviews)"]})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"text-4xl font-bold text-slate-900",children:["₹",s.currentPrice?.toLocaleString("en-IN")]}),s.basePrice>s.currentPrice&&e.jsxs("div",{className:"text-sm text-slate-500 line-through",children:["M.R.P: ₹",s.basePrice?.toLocaleString("en-IN")]})]}),e.jsx("div",{className:"prose prose-sm text-slate-600 leading-relaxed",children:e.jsx("p",{children:s.description})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-700 bg-slate-50 p-3 rounded-md border border-slate-100",children:[e.jsx(_,{className:"w-5 h-5 text-slate-900"})," Delivery in 2-3 Days"]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm font-medium text-slate-700 bg-slate-50 p-3 rounded-md border border-slate-100",children:[e.jsx(q,{className:"w-5 h-5 text-slate-900"})," 1 Year Warranty"]})]})]}),e.jsxs("div",{className:"pt-8 mt-4 border-t border-slate-100 flex gap-4",children:[e.jsxs("button",{onClick:L,disabled:s.stock===0,className:`flex-1 py-4 rounded-md font-bold text-base flex items-center justify-center gap-2 shadow-sm transition-all active:scale-[0.98] ${s.stock>0?"bg-slate-900 text-white dark:text-white hover:bg-slate-800":"bg-slate-100 text-slate-400 cursor-not-allowed"}`,children:[e.jsx(G,{className:"w-5 h-5"}),s.stock>0?"Add to Cart":"Out of Stock"]}),s.stock>0&&e.jsxs("button",{onClick:$,className:"flex-1 py-4 rounded-md font-bold text-base flex items-center justify-center gap-2 shadow-sm transition-all active:scale-[0.98] bg-[#fdc600] text-black dark:text-black hover:bg-yellow-400",children:[e.jsx(M,{className:"w-5 h-5 fill-black"}),"Buy Now"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:`lg:col-span-2 ${c} p-8 h-fit`,children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900 mb-6",children:"Customer Reviews"}),s.reviews.length===0?e.jsx("div",{className:"text-center py-10 text-slate-500",children:e.jsx("p",{children:"No reviews yet. Be the first to share your thoughts!"})}):e.jsx("div",{className:"space-y-8",children:s.reviews.map(t=>e.jsxs("div",{className:"border-b border-slate-100 pb-8 last:border-0 last:pb-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-slate-100 rounded-full flex items-center justify-center text-slate-700 font-bold border border-slate-200",children:t.name.charAt(0)}),e.jsxs("div",{children:[e.jsx("span",{className:"font-semibold text-slate-900 block leading-tight",children:t.name}),e.jsx("span",{className:"text-xs text-slate-400",children:new Date(t.createdAt).toLocaleDateString()})]})]}),e.jsx("div",{className:"flex text-yellow-400",children:[...Array(5)].map((l,N)=>e.jsx(k,{className:`w-4 h-4 ${N<t.rating?"fill-current":"text-gray-200"}`},N))})]}),e.jsx("p",{className:"text-slate-600 text-sm leading-relaxed ml-[52px]",children:t.comment})]},t._id))})]}),e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:`${c} p-8 sticky top-24`,children:[e.jsx("h3",{className:"text-lg font-bold text-slate-900 mb-1",children:"Write a Review"}),e.jsx("p",{className:"text-sm text-slate-500 mb-6",children:"Share your experience with this product."}),g?e.jsxs("form",{onSubmit:R,className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Rating"}),e.jsxs("div",{className:"relative",children:[e.jsxs("select",{value:d,onChange:t=>m(t.target.value),className:`${j} appearance-none cursor-pointer`,children:[e.jsx("option",{value:"5",children:"5 - Excellent"}),e.jsx("option",{value:"4",children:"4 - Very Good"}),e.jsx("option",{value:"3",children:"3 - Good"}),e.jsx("option",{value:"2",children:"2 - Fair"}),e.jsx("option",{value:"1",children:"1 - Poor"})]}),e.jsx(I,{className:"absolute right-3 top-3 h-4 w-4 text-slate-400 pointer-events-none"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:f,children:"Comment"}),e.jsx("textarea",{rows:"4",value:x,onChange:t=>h(t.target.value),placeholder:"What did you like or dislike?",className:`${j} h-auto min-h-[100px]`,required:!0})]}),e.jsxs("button",{type:"submit",disabled:o,className:v,children:[o?e.jsx(w,{className:"w-4 h-4 animate-spin mr-2"}):null,o?"Submitting...":"Submit Review"]})]}):e.jsxs("div",{className:"text-center py-8 bg-slate-50 rounded-lg border border-dashed border-slate-200",children:[e.jsx(T,{className:"w-10 h-10 text-slate-300 mx-auto mb-3"}),e.jsx("p",{className:"text-slate-600 text-sm mb-4 font-medium",children:"Please login to write a review."}),e.jsx(W,{to:"/login",className:v,children:"Login Now"})]})]})})]})]})}):e.jsx("div",{className:"text-center py-20",children:"Product not found"})};export{z as default};
