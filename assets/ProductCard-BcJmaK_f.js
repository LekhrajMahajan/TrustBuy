import{s as k,u as w,a as y,r as j,j as e,L as h,S as N,t as n}from"./index-Be1Zubjk.js";import{a as v,g as L}from"./helpers-DaoO1KdG.js";import{Z as C}from"./zap-C6clCx7u.js";import{S}from"./star-BvVS1y16.js";const $=({product:t,onEdit:r,onDelete:l})=>{const{addToCart:d}=k(),{user:c}=w(),i=y(),[m,b]=j.useState(!1);if(!t)return null;const u=o=>{if(o.preventDefault(),!c){n.error("Login Required",{description:"You must be logged in to add items to your cart.",action:{label:"Login Now",onClick:()=>i("/login")}});return}d(t),n(`${t.name} added to cart!`,{description:"Item has been successfully added."})},p=o=>{if(o.preventDefault(),!c){n.error("Login Required",{description:"You must be logged in to buy items.",action:{label:"Login Now",onClick:()=>i("/login")}});return}d(t),i("/payment")},s=Number(t.currentPrice)||0,a=Number(t.basePrice)||0,x=a>s?Math.round((a-s)/a*100):0,g=v(t.image),f=L(t.image);return e.jsxs("div",{className:"group relative flex flex-col w-full bg-transparent",children:[e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden bg-gray-100 dark:bg-gray-800 rounded-sm mb-4",children:[e.jsxs(h,{to:`/product/${t._id}`,className:"block h-full w-full",children:[g&&!m&&e.jsx("img",{src:g,alt:"","aria-hidden":"true",className:"absolute inset-0 w-full h-full object-cover scale-110 blur-xl"}),e.jsx("img",{src:f,alt:t.name,onLoad:()=>b(!0),className:`w-full h-full object-cover transition-all duration-500 ease-out group-hover:scale-105 ${m?"opacity-100 blur-0":"opacity-0"}`,loading:"lazy",decoding:"async"})]}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[x>0&&e.jsxs("span",{className:"bg-white dark:bg-gray-900/90 backdrop-blur px-2 py-1 text-[10px] uppercase font-bold tracking-widest text-red-600",children:["-",x,"%"]}),t.stock>0&&t.stock<5&&e.jsx("span",{className:"bg-white dark:bg-gray-900/90 backdrop-blur px-2 py-1 text-[10px] uppercase font-bold tracking-widest text-orange-600",children:"Low Stock"})]}),e.jsx("div",{className:"absolute bottom-1.5 left-1.5 right-1.5 sm:bottom-3 sm:left-3 sm:right-3 md:bottom-4 md:left-4 md:right-4 translate-y-0 opacity-100 lg:translate-y-4 lg:opacity-0 lg:group-hover:translate-y-0 lg:group-hover:opacity-100 transition-all duration-300 ease-out flex gap-1 sm:gap-1.5 md:gap-2",children:!r&&!l?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:u,disabled:t.stock===0,className:"flex-1 bg-white dark:bg-gray-900/95 backdrop-blur text-black dark:text-white h-8 sm:h-9 md:h-11 uppercase text-[8px] sm:text-[10px] md:text-xs font-bold tracking-tight sm:tracking-wide md:tracking-widest hover:bg-black hover:dark:bg-gray-800 hover:text-white transition-colors shadow-md flex items-center justify-center gap-1 md:gap-2 rounded-sm",children:[e.jsx(N,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.stock===0?"Sold Out":"Add to Cart"})]}),t.stock>0&&e.jsxs("button",{onClick:p,className:"flex-1 bg-black dark:bg-gray-900 border border-transparent dark:border-white backdrop-blur text-white dark:text-white h-8 sm:h-9 md:h-11 uppercase text-[8px] sm:text-[10px] md:text-xs font-bold tracking-tight sm:tracking-wide md:tracking-widest hover:bg-[#fdc600] hover:text-black dark:hover:text-black transition-colors shadow-md flex items-center justify-center gap-1 md:gap-2 rounded-sm",children:[e.jsx(C,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3.5 md:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Buy Now"})]})]}):e.jsxs("div",{className:"flex w-full gap-1 sm:gap-1.5 md:gap-2",children:[r&&e.jsx("button",{onClick:()=>r(t),className:"flex-1 bg-white dark:bg-gray-900/95 text-black dark:text-white h-8 sm:h-9 md:h-11 text-[9px] sm:text-xs md:text-sm font-bold hover:bg-black hover:dark:bg-gray-800 hover:text-white shadow-md backdrop-blur rounded-sm",children:"Edit"}),l&&e.jsx("button",{onClick:()=>l(t._id),className:"flex-1 bg-red-600/95 sm:bg-red-600 text-white dark:text-white h-8 sm:h-9 md:h-11 text-[9px] sm:text-xs md:text-sm font-bold hover:bg-red-700 shadow-md backdrop-blur rounded-sm",children:"Delete"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(h,{to:`/product/${t._id}`,children:e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:underline decoration-1 underline-offset-4 line-clamp-1",children:t.name})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["₹",s.toLocaleString("en-IN")]}),a>s&&e.jsxs("span",{className:"text-gray-400 line-through text-xs",children:["₹",a.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3 fill-black text-black dark:text-white"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.rating||0})]})]})]})]})};export{$ as P};
