import{s as k,u as w,a as j,r as N,j as e,L as h,S as y,t as i}from"./index-CLD3W239.js";import{a as v,g as L}from"./helpers-DaoO1KdG.js";import{Z as C}from"./zap-CT2nCUS_.js";import{S}from"./star-CQDmV7lW.js";const $=({product:t,onEdit:r,onDelete:l})=>{const{addToCart:d}=k(),{user:c}=w(),n=j(),[x,b]=N.useState(!1);if(!t)return null;const u=o=>{if(o.preventDefault(),!c){i.error("Login Required",{description:"You must be logged in to add items to your cart.",action:{label:"Login Now",onClick:()=>n("/login")}});return}d(t),i(`${t.name} added to cart!`,{description:"Item has been successfully added."})},p=o=>{if(o.preventDefault(),!c){i.error("Login Required",{description:"You must be logged in to buy items.",action:{label:"Login Now",onClick:()=>n("/login")}});return}d(t),n("/payment")},a=Number(t.currentPrice)||0,s=Number(t.basePrice)||0,m=s>a?Math.round((s-a)/s*100):0,g=v(t.image),f=L(t.image);return e.jsxs("div",{className:"group relative flex flex-col w-full bg-transparent",children:[e.jsxs("div",{className:"relative aspect-[3/4] overflow-hidden bg-gray-100 dark:bg-gray-800 rounded-sm mb-4",children:[e.jsxs(h,{to:`/product/${t._id}`,className:"block h-full w-full",children:[g&&!x&&e.jsx("img",{src:g,alt:"","aria-hidden":"true",className:"absolute inset-0 w-full h-full object-cover scale-110 blur-xl"}),e.jsx("img",{src:f,alt:t.name,onLoad:()=>b(!0),className:`w-full h-full object-cover transition-all duration-500 ease-out group-hover:scale-105 ${x?"opacity-100 blur-0":"opacity-0"}`,loading:"lazy",decoding:"async"})]}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[m>0&&e.jsxs("span",{className:"bg-white dark:bg-gray-900/90 backdrop-blur px-2 py-1 text-[10px] uppercase font-bold tracking-widest text-red-600",children:["-",m,"%"]}),t.stock>0&&t.stock<5&&e.jsx("span",{className:"bg-white dark:bg-gray-900/90 backdrop-blur px-2 py-1 text-[10px] uppercase font-bold tracking-widest text-orange-600",children:"Low Stock"})]}),e.jsx("div",{className:"absolute bottom-1.5 left-1.5 right-1.5 sm:bottom-3 sm:left-3 sm:right-3 md:bottom-3 md:left-3 md:right-3 lg:bottom-4 lg:left-4 lg:right-4 flex gap-1 sm:gap-1.5 md:gap-2",children:!r&&!l?e.jsxs(e.Fragment,{children:[e.jsxs("button",{onClick:u,disabled:t.stock===0,className:`flex-1 bg-white/95 dark:bg-gray-900/95 backdrop-blur text-black dark:text-white\r
                  h-7 text-[7px] gap-0.5\r
                  sm:h-8 sm:text-[9px] sm:gap-1\r
                  md:h-10 md:text-[10px] md:gap-1.5\r
                  lg:h-10 lg:text-[10px]\r
                  xl:h-11 xl:text-xs xl:gap-2\r
                  uppercase font-bold tracking-wide\r
                  hover:bg-black hover:dark:bg-gray-800 hover:text-white\r
                  transition-colors shadow-md flex items-center justify-center rounded-sm\r
                  disabled:opacity-60 disabled:cursor-not-allowed`,children:[e.jsx(y,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:t.stock===0?"Sold Out":"Add to Cart"})]}),t.stock>0&&e.jsxs("button",{onClick:p,className:`flex-1 bg-black dark:bg-gray-900 border border-transparent dark:border-white/30 backdrop-blur text-white\r
                    h-7 text-[7px] gap-0.5\r
                    sm:h-8 sm:text-[9px] sm:gap-1\r
                    md:h-10 md:text-[10px] md:gap-1.5\r
                    lg:h-10 lg:text-[10px]\r
                    xl:h-11 xl:text-xs xl:gap-2\r
                    uppercase font-bold tracking-wide\r
                    hover:bg-[#fdc600] hover:text-black\r
                    transition-colors shadow-md flex items-center justify-center rounded-sm`,children:[e.jsx(C,{className:"w-2.5 h-2.5 sm:w-3 sm:h-3 md:w-3 md:h-3 xl:w-3.5 xl:h-3.5 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:"Buy Now"})]})]}):e.jsxs("div",{className:"flex w-full gap-1 sm:gap-1.5 md:gap-2",children:[r&&e.jsx("button",{onClick:()=>r(t),className:"flex-1 bg-white/95 dark:bg-gray-900/95 text-black dark:text-white h-7 sm:h-8 md:h-10 xl:h-11 text-[8px] sm:text-[10px] md:text-xs font-bold hover:bg-black hover:dark:bg-gray-800 hover:text-white shadow-md backdrop-blur rounded-sm",children:"Edit"}),l&&e.jsx("button",{onClick:()=>l(t._id),className:"flex-1 bg-red-600 text-white h-7 sm:h-8 md:h-10 xl:h-11 text-[8px] sm:text-[10px] md:text-xs font-bold hover:bg-red-700 shadow-md backdrop-blur rounded-sm",children:"Delete"})]})})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(h,{to:`/product/${t._id}`,children:e.jsx("h3",{className:"text-sm font-medium text-gray-900 dark:text-gray-100 group-hover:underline decoration-1 underline-offset-4 line-clamp-1",children:t.name})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsxs("span",{className:"font-semibold text-gray-900 dark:text-gray-100",children:["₹",a.toLocaleString("en-IN")]}),s>a&&e.jsxs("span",{className:"text-gray-400 line-through text-xs",children:["₹",s.toLocaleString("en-IN")]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3 fill-black text-black dark:text-white"}),e.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:t.rating||0})]})]})]})]})};export{$ as P};
